name: Deploy to DigitalOcean
on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Print Variables
      run: |
        echo NODEMON_API_KEY ${{ env.NODEMON_API_KEY }}

    # - name: Deploy to DigitalOcean
    #   uses: appleboy/ssh-action@master
    #   with:
    #     host: ${{secrets.DIGITALOCEAN_HOST}}
    #     username: ${{secrets.DIGITALOCEAN_USERNAME}}
    #     key: ${{secrets.SSH_PRIVATE_KEY}}
    #     NODEMON_API: ${{env.prod.NODEMON_API}}
    #     DB_CONNECTION_STRING: ${{env.prod.DB_CONNECTION_STRING}}
    #     script: |
    #       npm -v
    #       git clone git@github.com:troquilho/test-dashboard-api.git
    #       cd test-dashboard-api
    #       npm install
    #       npm run dev